(this.webpackJsonpOcaChat=this.webpackJsonpOcaChat||[]).push([[0],{100:function(e,n,t){},103:function(e,n,t){},104:function(e,n,t){},105:function(e,n,t){},106:function(e,n,t){},107:function(e,n,t){},112:function(e,n,t){},114:function(e,n,t){},116:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(71),s=t.n(c),o=(t(93),t(4)),i=(t(94),t(22)),u=t(5),l=t(7),d=t(31),j=t(6),m=t.n(j),b=t(10),f=(t(96),t.p+"static/media/logo.c4fc47fc.png"),p="http://192.168.8.100:8080",h="".concat(p,"/api/register"),O="".concat(p,"/api/login"),g="".concat(p,"/api/set-avatar"),x="".concat(p,"/api/avatars"),v="".concat(p,"/api/allusers"),w="".concat(p,"/api/add-message"),y="".concat(p,"/api/get-messages"),S="".concat(p,"/api/update-user"),N="".concat(p,"/api/delete-user"),k=t(1);var C=function(){var e=Object(a.useState)({username:"",email:"",password:"",confirmPassword:""}),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(null),s=Object(o.a)(c,2),j=s[0],p=s[1],O=Object(a.useState)(null),g=Object(o.a)(O,2),x=g[0],v=(g[1],Object(u.f)());Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("chatUser"))&&v("/avatar")}),[]);var w=function(){var e=t.password,n=t.confirmPassword,a=t.email,r=t.username;return!r||r.length<3?(p("Username should be greater than 3 characters!"),!1):a?e.length<6?(p("Password should be more than 6 charcters long!"),!1):e===n||(p("Password and Confirm Password should be the same!"),!1):(p("Email Field is Required"),!1)},y=function(){var e=Object(b.a)(m.a.mark((function e(n){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=w()){e.next=4;break}return e.abrupt("return");case 4:return a&&p(null),e.next=7,fetch(h,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:return r=e.sent,e.next=10,r.json();case 10:(c=e.sent).success?(localStorage.setItem("chatUser",JSON.stringify(c.user)),v("/login")):p(c.message);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(e){r(Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},e.target.name,e.target.value)))};return Object(k.jsxs)("div",{className:"form-container",children:[Object(k.jsxs)("form",{onSubmit:function(e){return y(e)},children:[Object(k.jsxs)("div",{className:"brand",children:[Object(k.jsx)("img",{src:f,alt:"Logo"}),Object(k.jsx)("h1",{children:"OcaChat"})]}),x&&Object(k.jsx)("div",{className:"message",children:x})," ",Object(k.jsx)("input",{type:"text",placeholder:"Username",name:"username",onChange:function(e){return S(e)}}),Object(k.jsx)("input",{type:"email",placeholder:"Email",name:"email",onChange:function(e){return S(e)}}),Object(k.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:function(e){return S(e)}}),Object(k.jsx)("input",{type:"password",placeholder:"Confirm Password",name:"confirmPassword",onChange:function(e){return S(e)}}),Object(k.jsx)("button",{type:"submit",children:"Create User"}),Object(k.jsxs)("span",{children:["Already have an Account? ",Object(k.jsx)(i.b,{to:"/login",children:"Log In"})]})]}),j&&Object(k.jsx)("div",{className:"error",children:j})]})};t(98);var I,U=function(e){var n=e.notice,t=e.setNotice,r=Object(a.useState)({username:"",password:""}),c=Object(o.a)(r,2),s=c[0],j=c[1],p=Object(a.useState)(null),h=Object(o.a)(p,2),g=h[0],x=h[1],v=Object(a.useState)(null),w=Object(o.a)(v,2),y=w[0],S=(w[1],Object(a.useState)([])),N=Object(o.a)(S,2),C=(N[0],N[1],Object(u.f)());Object(a.useEffect)((function(){n&&setTimeout((function(){return t(void 0)}),5e3)}),[n]),Object(a.useEffect)((function(){if(JSON.parse(localStorage.getItem("chatUser")))return JSON.parse(localStorage.getItem("chatUser")).isAvatarImageSet?C("/"):C("/avatar")}),[]);var I=function(){var e=s.password;return!(!s.username||!e)||(x("Username and password is required"),!1)},U=function(){var e=Object(b.a)(m.a.mark((function e(n){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=I()){e.next=4;break}return e.abrupt("return");case 4:return t&&x(null),e.next=7,fetch(O,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 7:return a=e.sent,e.next=10,a.json();case 10:(r=e.sent).success?(localStorage.setItem("chatUser",JSON.stringify(r.user)),r.user.isAvatarImageSet?C("/"):C("/avatar")):x(r.message);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(e){j(Object(d.a)(Object(d.a)({},s),{},Object(l.a)({},e.target.name,e.target.value)))};return Object(k.jsxs)("div",{className:"form-container",children:[n&&Object(k.jsx)("div",{className:"notice",children:Object(k.jsx)("h2",{children:n})}),Object(k.jsxs)("form",{onSubmit:function(e){return U(e)},children:[Object(k.jsxs)("div",{className:"brand",children:[Object(k.jsx)("img",{src:f,alt:"Logo"}),Object(k.jsx)("h1",{children:"OcaChat"})]}),y&&Object(k.jsx)("div",{className:"message",children:y})," ",Object(k.jsx)("input",{type:"text",placeholder:"Username",name:"username",onChange:function(e){return P(e)}}),Object(k.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:function(e){return P(e)}}),Object(k.jsx)("button",{type:"submit",children:"Log In"}),Object(k.jsxs)("span",{children:["Don't have an Account? ",Object(k.jsx)(i.b,{to:"/register",children:"Register "})]})]}),g&&Object(k.jsx)("div",{className:"error",children:g})]})},P=t(12),J=t(26),E=(t(99),t(24)),A=(t(100),t(75)),F=t.n(A);var z,_=function(e){var n=e.title,t=Object(u.f)();return Object(k.jsx)(R,{onClick:function(){localStorage.removeItem("chatUser"),t("/login")},title:n,children:Object(k.jsx)(F.a,{})})},R=E.a.button(I||(I=Object(P.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background-color: red;\n  border: none;\n  cursor: pointer;\n  svg {\n    font-size: 1.3rem;\n    color: #ebe7ff;\n  }\n"]))),T=(t(103),t(80)),L=t.n(T),D=t(83),V=t.n(D),q=t(81),W=t.n(q),M=t(82),B=t.n(M);var G,H=function(e){var n=e.handleSendMessage,t=Object(a.useState)(!1),r=Object(o.a)(t,2),c=r[0],s=r[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),l=u[0],d=u[1],j=Object(a.useState)(void 0),f=Object(o.a)(j,2),p=f[0],h=f[1],O=Object(a.useState)(void 0),g=Object(o.a)(O,2),x=(g[0],g[1]),v=Object(a.useState)(void 0),w=Object(o.a)(v,2),y=w[0],S=w[1],N=function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n(l,p,y);case 5:d(""),h(void 0);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(k.jsxs)(K,{children:[Object(k.jsx)("div",{className:"button-container",children:Object(k.jsxs)("div",{className:"emoji",children:[Object(k.jsx)(W.a,{onClick:function(){s(!c)}}),c&&Object(k.jsx)(L.a,{onEmojiClick:function(e,n){var t=l;t+=n.emoji,d(t),s(!1)}}),Object(k.jsxs)("label",{children:[Object(k.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",style:{width:0,height:0,display:"none"},onChange:function(e){return function(e){var n=e.target.files[0];S((n.size/1024/1024).toFixed(2)),x(n.type);var t=new FileReader;t.onloadend=function(){h(this.result)},d(n.name),t.readAsDataURL(n)}(e)}}),Object(k.jsx)(B.a,{})]})," "]})}),Object(k.jsxs)("form",{className:"input-container",children:[Object(k.jsx)("input",{type:"text",placeholder:"Type your message here",onChange:function(e){return d(e.target.value)},value:l}),Object(k.jsx)("button",{className:"submit",onClick:N,children:Object(k.jsx)(V.a,{})})]})]})},K=E.a.div(z||(z=Object(P.a)(["\n  display: grid;\n  grid-template-columns: 5% 95%;\n  align-items: center;\n  background-color: #080420;\n  padding: 0 2rem;\n  padding-bottom: 0.3rem;\n\n  @media screen and (min-width: 720px) and (max-width: 1000px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: #fff;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      display: flex;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n\n      .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9186f3;\n        .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9186f3;\n          }\n        }\n\n        .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background: transparent;\n          border-color: #9186f3;\n        }\n\n        .emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n\n  .input-container {\n    background-color: #ffffff34;\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-content: center;\n    align-items: center;\n    gap: 2rem;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n  }\n\n  button {\n    padding: 0.3rem 2rem;\n    border-radius: 2rem;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #9a86f3;\n    border: none;\n\n    @media screen and (min-width: 720px) and (max-width: 1000px) {\n      padding: 0.3rem 1rem;\n      svg {\n        font-size: 1rem;\n      }\n    }\n    svg {\n      font-size: 2rem;\n      color: white;\n    }\n  }\n"])));t(104);var Q;E.a.div(G||(G=Object(P.a)(["\n  height: 80%;\n"])));var X,Y=function(e){var n=e.currentChat,t=e.currentUser,r=e.socket,c=Object(a.useState)([]),s=Object(o.a)(c,2),i=s[0],u=s[1],l=Object(a.useState)(void 0),d=Object(o.a)(l,2),j=d[0],f=d[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),O=h[0],g=h[1],x=Object(a.useState)(void 0),v=Object(o.a)(x,2),S=v[0],N=v[1],C=Object(a.useRef)();Object(a.useEffect)((function(){if(n)return I()}),[n]);var I=function(){var e=Object(b.a)(m.a.mark((function e(){var a,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={to:n._id,from:t._id},e.next=3,fetch(y,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:(c=e.sent).success&&u(c.messages);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(m.a.mark((function e(a){var c,s,o,l,d,j,b=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.length>1&&void 0!==b[1]?b[1]:null,s=b.length>2?b[2]:void 0,o=null,!c){e.next=9;break}if(!(s>4)){e.next=6;break}return e.abrupt("return",alert("Image Too Large"));case 6:o={image:c,message:"image",isFile:!0,to:n._id,from:t._id},e.next=10;break;case 9:o={isFile:!1,message:a,to:n._id,from:t._id};case 10:return e.next=12,fetch(w,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 12:return l=e.sent,e.next=15,l.json();case 15:e.sent.success&&(r.current.emit("send-message",o),d=Object(J.a)(i),j=!!c,d.push({fromSelf:!0,message:a,image:c,isFile:j}),u(d));case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r.current&&r.current.on("msg-receive",(function(e){var n=e.message,t=e.image,a=e.isFile;f({fromSelf:!1,message:n,image:t,isFile:a})}))}),[]),Object(a.useEffect)((function(){j&&u((function(e){return[].concat(Object(J.a)(e),[j])}))}),[j]),Object(a.useEffect)((function(){var e;null===(e=C.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"})}),[i]),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Z,{className:"chats",children:[Object(k.jsxs)("div",{className:"chat-header",children:[Object(k.jsxs)("div",{className:"user-details",children:[Object(k.jsx)("div",{className:"avatar",children:Object(k.jsx)("img",{src:n.avatarImage,alt:""})}),Object(k.jsx)("div",{className:"username",children:Object(k.jsx)("h3",{children:n.username})})]}),Object(k.jsx)(_,{})]}),O&&S&&Object(k.jsx)("div",{className:"overlay",onClick:function(e){return g(!1)},children:Object(k.jsx)("div",{className:"large-image-container",children:Object(k.jsx)("img",{src:S,alt:"Large Image"})})}),Object(k.jsx)("div",{className:"chat-messages",children:i.map((function(e,n){return Object(k.jsx)("div",{ref:C,children:Object(k.jsx)("div",{className:"message ".concat(e.fromSelf?"sended":"received"),children:e.isFile?Object(k.jsx)("div",{className:"image-container ".concat(e.fromSelf?"my-image":""),children:Object(k.jsx)("img",{src:e.image,alt:e.message,onClick:function(e){return function(e){N(e.target.src),g(!0)}(e)}})}):"image"!==e.message&&Object(k.jsx)("div",{className:"content",children:Object(k.jsx)("p",{children:e.message})})})},n)}))}),Object(k.jsx)(H,{handleSendMessage:U})," "]})})},Z=E.a.div(Q||(Q=Object(P.a)(["\n  padding-top: 1rem;\n  display: grid;\n  grid-template-rows: 10% 78% 12%;\n  gap: 0.1rem;\n  overflow: hidden;\n\n  @media screen and (min-width: 720px) and (max-width: 1000px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n\n  .chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: black;\n        }\n      }\n    }\n  }\n\n  .chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 50%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: white;\n      }\n\n      .image-container {\n        width: 100px;\n        img {\n          width: 100%;\n        }\n      }\n      .my-image {\n        justify-content: flex-end;\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n        background-color: green;\n      }\n    }\n    .received {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n        background-color: rgb(0, 183, 255);\n      }\n    }\n  }\n\n  .overlay {\n    position: fixed;\n    background-color: rgba(0, 0, 0, 0.1);\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    z-index: 200;\n    padding: 20px;\n  }\n\n  .large-image-container {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background-color: inherit;\n    padding: 10px;\n    border-radius: 6px;\n    z-index: 200;\n    margin: auto;\n    max-width: 100%;\n\n    img {\n      display: block;\n      margin: auto;\n      object-fit: contain;\n      width: 100%;\n      max-height: 800px;\n      border-radius: 6px;\n    }\n  }\n"])));t(105);var $,ee=function(e){var n=e.contacts,t=e.currentUser,r=e.changeChat,c=Object(a.useState)(void 0),s=Object(o.a)(c,2),u=s[0],l=s[1],d=Object(a.useState)(void 0),j=Object(o.a)(d,2),m=j[0],b=j[1],p=Object(a.useState)(void 0),h=Object(o.a)(p,2),O=h[0],g=h[1];return Object(a.useEffect)((function(){t&&(b(t.avatarImage),l(t.username))}),[t]),Object(k.jsx)(k.Fragment,{children:t&&u&&Object(k.jsxs)(ne,{children:[Object(k.jsxs)("div",{className:"brand",children:[Object(k.jsx)("img",{src:f,alt:"Logo"}),Object(k.jsx)("h3",{children:"OcaChat"})]}),Object(k.jsx)("div",{className:"contacts",children:n.map((function(e,n){return Object(k.jsxs)("div",{className:"contact ".concat(n===O?"selected":""),onClick:function(){return function(e,n){g(e),r(n)}(n,e)},children:[Object(k.jsx)("div",{className:"avatar",children:Object(k.jsx)("img",{src:e.avatarImage,alt:"Avatar"})}),Object(k.jsx)("div",{className:"username",children:Object(k.jsx)("h3",{children:e.username})})]},n)}))}),Object(k.jsxs)("div",{className:"current-user",children:[Object(k.jsx)("div",{className:"avatar",children:Object(k.jsx)("img",{src:m,alt:"Avatar"})}),Object(k.jsxs)("div",{className:"username",children:[Object(k.jsx)("h2",{children:u}),Object(k.jsx)(i.b,{to:"/dashboard",style:{textDecoration:"none",color:"rgba(255, 255, 255, 0.6)"},children:"Account Setting"})]})]})]})})},ne=E.a.div(X||(X=Object(P.a)(["\n  display: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n\n  .brand {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 1rem;\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: #fff;\n    }\n  }\n\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gab: 0.8rem;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n    .contact {\n      display: flex;\n      background-color: #ffffff39;\n      min-height: 5rem;\n      width: 90%;\n      cursor: pointer;\n      border-radius: 0.2rem;\n      padding: 0.4rem;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      margin-bottom: 5px;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n\n      .username {\n        h3 {\n          color: #fff;\n        }\n      }\n    }\n\n    .selected {\n      background-color: #9186f3;\n    }\n  }\n\n  .current-user {\n    background-color: #0d0d30;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        width: 4rem;\n        border-radius: 50%;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: #fff;\n      }\n    }\n\n    @media screen and (min-width: 720px) and (max-width: 1000px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),te=(t(106),t.p+"static/media/robot.67ed14c8.png");var ae=function(e){var n=e.currentUser;return Object(k.jsxs)(re,{children:[Object(k.jsx)("img",{src:te,alt:"Robot"}),Object(k.jsxs)("h1",{children:["Welcome, ",Object(k.jsxs)("span",{children:[null===n||void 0===n?void 0:n.username,"!"]})]}),Object(k.jsx)("h3",{children:"Please select a chat to start messaging"})]})},re=E.a.div($||($=Object(P.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  color: black;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: darkcyan;\n  }\n"]))),ce=(t(107),t(85));var se=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(void 0),s=Object(o.a)(c,2),i=s[0],l=s[1],d=Object(a.useState)(void 0),j=Object(o.a)(d,2),f=j[0],h=j[1],O=Object(a.useRef)(),g=Object(u.f)();Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("chatUser"))?l(JSON.parse(localStorage.getItem("chatUser"))):g("/login")}),[]),Object(a.useEffect)((function(){x(),i&&(O.current=Object(ce.a)(p),O.current.emit("add-user",i._id))}),[i]);var x=function(){var e=Object(b.a)(m.a.mark((function e(n){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=9;break}if(!i.isAvatarImageSet){e.next=9;break}return e.next=4,fetch("".concat(v,"/").concat(i._id));case 4:return t=e.sent,e.next=7,t.json();case 7:(a=e.sent).success?r(a.allUsers):g("/avatar");case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"chat-container",children:Object(k.jsxs)("div",{className:"content-container",children:[Object(k.jsx)(ee,{contacts:t,currentUser:i,changeChat:w}),f?Object(k.jsx)(Y,{currentChat:f,currentUser:i,socket:O}):Object(k.jsx)(ae,{currentUser:i})]})})},oe=(t(112),t.p+"static/media/loader.a8c3a5a5.png");var ie,ue=function(){var e=x,n=Object(u.f)(),t=Object(a.useState)([]),r=Object(o.a)(t,2),c=r[0],s=r[1],i=Object(a.useState)(!0),l=Object(o.a)(i,2),d=l[0],j=l[1],f=Object(a.useState)(void 0),p=Object(o.a)(f,2),h=p[0],O=p[1],v=Object(a.useState)(""),w=Object(o.a)(v,2),y=w[0],S=w[1];Object(a.useEffect)((function(){N()}),[]);var N=function(){var n=Object(b.a)(m.a.mark((function n(){var t,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return t=n.sent,n.next=5,t.json();case 5:(a=n.sent).success&&(s(a.avatars),j(!1));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("chatUser"))||n("/login")}),[]);var C=function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return",S("Please Select Avatar and Try Again"));case 2:return t=JSON.parse(localStorage.getItem("chatUser"))||null,e.next=5,fetch(g,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t._id,avatarImage:c[h]})});case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,console.log(r),r.success?(t.isAvatarImageSet=r.success,t.avatarImage=r.image,localStorage.setItem("chatUser",JSON.stringify(t)),n("/")):S("Internal Server Error!");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(k.Fragment,{children:d?Object(k.jsx)("div",{className:"avatar-container",children:Object(k.jsx)("img",{src:oe,alt:"loader",className:"loader"})}):Object(k.jsxs)("div",{className:"avatar-container",children:[y&&Object(k.jsx)("div",{className:"error",children:y}),Object(k.jsxs)("div",{className:"title-container",children:[Object(k.jsx)("h1",{children:"Pick an Avatar as your profle picture"}),Object(k.jsx)("div",{className:"avatars",children:c.map((function(e,n){return Object(k.jsxs)("div",{className:"avatar ".concat(h===n?"selected":""),onClick:function(){return O(n)},children:[Object(k.jsx)("img",{src:e,alt:"Avatar"})," "]},n)}))})]})," ",Object(k.jsx)("button",{className:"submit-btn",onClick:function(){return C()},children:"Set As Profile Picture"})]})})},le=(t(113),t(114),t.p,t(134));var de=function(e){var n=e.setNotice,t=Object(a.useState)(void 0),r=Object(o.a)(t,2),c=r[0],s=r[1],j=Object(a.useState)(null),f=Object(o.a)(j,2),p=f[0],h=f[1],O=Object(a.useState)(),x=Object(o.a)(O,2),v=x[0],w=x[1],y=Object(a.useRef)(null),C=(Object(u.g)().id,Object(u.f)()),I=Object(a.useRef)(),U=Object(a.useRef)(),P=Object(a.useState)({username:"",email:"",firstname:"",lastname:"",phone:"",oldPassword:"",password:"",confirmPassword:""}),J=Object(o.a)(P,2),E=J[0],A=J[1];Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("chatUser"))?s(JSON.parse(localStorage.getItem("chatUser"))):C("/login")}),[]),Object(a.useEffect)((function(){c&&(I.current.style.background="url(".concat(c.avatarImage,") no-repeat center center"),I.current.style.backgroundSize="cover")}),[c]);var F=function(){var e=Object(b.a)(m.a.mark((function e(n){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c._id,avatarImage:n})});case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent).success?(localStorage.setItem("chatUser",JSON.stringify(Object(d.a)(Object(d.a)({},c),{},{avatarImage:a.image}))),s(JSON.parse(localStorage.getItem("chatUser"))),w("Image Set!")):h("Internal Server Error!");case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new FileReader).onloadend=Object(b.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.querySelector(".passport-label")).style.background="url(".concat(this.result,") no-repeat center center"),n.style.backgroundSize="cover",e.next=5,F(this.result);case 5:case"end":return e.stop()}}),e,this)}))),t.readAsDataURL(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(m.a.mark((function e(){var n,t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={username:E.username||c.username,firstname:E.firstname,lastname:E.lastname,phone:E.phone},U.current.value){e.next=4;break}return h("Username is Requierd!"),e.abrupt("return");case 4:return e.next=6,fetch("".concat(S,"/").concat(c._id),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return t=e.sent,e.next=9,t.json();case 9:(a=e.sent).success?(localStorage.setItem("chatUser",JSON.stringify(a.user)),s(JSON.parse(localStorage.getItem("chatUser"))),w("Data updated successfully!")):h("Internal Server Error!");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){A(Object(d.a)(Object(d.a)({},E),{},Object(l.a)({},e.target.name,e.target.value)))},L=function(){var e=Object(b.a)(m.a.mark((function e(){var n,t,a,r,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(),w(),n=E.oldPassword,t=E.password,a=E.confirmPassword,n){e.next=6;break}return h("Enter old password"),e.abrupt("return");case 6:if(t){e.next=9;break}return h("Enter New password"),e.abrupt("return");case 9:if(a){e.next=12;break}return h("Enter Confirm password"),e.abrupt("return");case 12:if(t===a){e.next=15;break}return h("Enter Passwords does not match"),e.abrupt("return");case 15:return r={userId:c._id,oldPassword:n,password:t,confirmPassword:a},e.next=18,fetch("".concat(S,"/").concat(c._id),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 18:return o=e.sent,e.next=21,o.json();case 21:(i=e.sent).success?(localStorage.setItem("chatUser",JSON.stringify(i.user)),s(JSON.parse(localStorage.getItem("chatUser"))),w("Password updated successfully!"),h()):h(i.message);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete your account?")){e.next=8;break}return e.next=3,fetch("".concat(N,"/").concat(c._id),{method:"post",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).success?(n(a.message),localStorage.removeItem("chatUser"),C("/login")):h(a.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"dashboard",children:[Object(k.jsxs)("div",{className:"log-out-wrapper",children:[Object(k.jsx)(le.a,{variant:"contained",color:"secondary",children:Object(k.jsx)(i.b,{to:"/",children:"Back to Chat"})}),Object(k.jsx)(_,{title:"Log Out"})]}),Object(k.jsxs)("div",{className:"dashboard-content-wrapper",children:[Object(k.jsxs)("h2",{children:["Welcome ",null===c||void 0===c?void 0:c.username,", to your dashborad"]}),v&&Object(k.jsx)("p",{className:"success",children:v}),p&&Object(k.jsx)("p",{className:"error",children:p}),c&&Object(k.jsxs)("div",{className:"dashboard-form",ref:y,children:[Object(k.jsx)("div",{className:"passport-container",children:Object(k.jsx)("label",{className:"passport-label",htmlFor:"passport",ref:I,children:Object(k.jsx)("input",{type:"file",name:"profile",id:"passport",accept:"image/*",onChange:function(e){return z(e.target.files[0])}})})}),Object(k.jsx)("h3",{children:"Edit Details"}),Object(k.jsxs)("div",{className:"wrapper",children:[Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"email",name:"email",placeholder:"Email",autoComplete:"off",value:c.email,disabled:!0,readOnly:!0})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",name:"username",placeholder:"User Name",defaultValue:c.username,autoComplete:"off",onChange:function(e){return T(e)},ref:U})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",name:"firstname",placeholder:"First Name",autoComplete:"off",defaultValue:c.firstname,onChange:function(e){return T(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"text",name:"lastname",placeholder:"Last Name",autoComplete:"off",defaultValue:c.lastname,onChange:function(e){return T(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone",autoComplete:"off",defaultValue:c.phone,onChange:function(e){return T(e)}})}),Object(k.jsx)("div",{className:"btn-group",children:Object(k.jsx)(le.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return R()},children:"Save"})}),Object(k.jsx)("h4",{children:"Old Password"}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",name:"oldPassword",placeholder:"Old Password",onChange:function(e){return T(e)}})}),Object(k.jsx)("h4",{children:"New Password"}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",name:"password",placeholder:"New Password",onChange:function(e){return T(e)}})}),Object(k.jsx)("div",{className:"form-group",children:Object(k.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:function(e){return T(e)}})}),Object(k.jsx)("div",{className:"btn-group",children:Object(k.jsx)(le.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return L()},children:"Change Password"})})]})]}),Object(k.jsx)(le.a,{onClick:function(){return D()},style:{position:"fixed",backgroundColor:"red",color:"white",fontSize:15},children:"Delete Account"})]})]})};E.a.div(ie||(ie=Object(P.a)(["\n  background-color: white;\n"])));var je=function(){var e=Object(a.useState)(void 0),n=Object(o.a)(e,2),t=n[0],r=n[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(i.a,{children:Object(k.jsxs)(u.c,{children:[Object(k.jsx)(u.a,{path:"/",element:Object(k.jsx)(se,{})}),Object(k.jsx)(u.a,{path:"/register",element:Object(k.jsx)(C,{})}),Object(k.jsx)(u.a,{path:"/login",element:Object(k.jsx)(U,{notice:t,setNotice:r})}),Object(k.jsx)(u.a,{path:"/avatar",element:Object(k.jsx)(ue,{})}),Object(k.jsx)(u.a,{path:"/dashboard",element:Object(k.jsx)(de,{setNotice:r})}),Object(k.jsx)(u.a,{path:"*",element:Object(k.jsxs)("div",{className:"not-found",children:[Object(k.jsx)("h2",{children:" Page Not Found!!"}),Object(k.jsx)(i.b,{to:"/login",children:"Log In"})]})})]})})})};s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(je,{})}),document.getElementById("root"))},93:function(e,n,t){},94:function(e,n,t){},96:function(e,n,t){},98:function(e,n,t){},99:function(e,n,t){}},[[116,1,2]]]);
//# sourceMappingURL=main.14b72a8c.chunk.js.map